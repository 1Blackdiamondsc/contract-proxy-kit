(this["webpackJsonpcpk-configuration-app"]=this["webpackJsonpcpk-configuration-app"]||[]).push([[0],{192:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"internalType":"bytes","name":"transactions","type":"bytes"}],"name":"multiSend","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]')},194:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"nonce","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"VERSION","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_owners","type":"address[]"},{"name":"_threshold","type":"uint256"},{"name":"to","type":"address"},{"name":"data","type":"bytes"},{"name":"fallbackHandler","type":"address"},{"name":"paymentToken","type":"address"},{"name":"payment","type":"uint256"},{"name":"paymentReceiver","type":"address"}],"name":"setup","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"},{"name":"data","type":"bytes"},{"name":"operation","type":"uint8"},{"name":"safeTxGas","type":"uint256"},{"name":"baseGas","type":"uint256"},{"name":"gasPrice","type":"uint256"},{"name":"gasToken","type":"address"},{"name":"refundReceiver","type":"address"},{"name":"signatures","type":"bytes"}],"name":"execTransaction","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"prevOwner","type":"address"},{"name":"oldOwner","type":"address"},{"name":"newOwner","type":"address"}],"name":"swapOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"},{"name":"data","type":"bytes"},{"name":"operation","type":"uint8"}],"name":"requiredTxGas","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"},{"internalType":"enum Enum.Operation","name":"operation","type":"uint8"},{"internalType":"uint256","name":"safeTxGas","type":"uint256"},{"internalType":"uint256","name":"baseGas","type":"uint256"},{"internalType":"uint256","name":"gasPrice","type":"uint256"},{"internalType":"address","name":"gasToken","type":"address"},{"internalType":"address","name":"refundReceiver","type":"address"},{"internalType":"uint256","name":"_nonce","type":"uint256"}],"name":"getTransactionHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getModules","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"contract Module","name":"module","type":"address"}],"name":"enableModule","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"contract Module","name":"prevModule","type":"address"},{"internalType":"contract Module","name":"module","type":"address"}],"name":"disableModule","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]')},423:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"proxyCreationCode","outputs":[{"internalType":"bytes","name":"","type":"bytes"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"masterCopy","type":"address"},{"internalType":"uint256","name":"saltNonce","type":"uint256"},{"internalType":"address","name":"fallbackHandler","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"},{"internalType":"enum Enum.Operation","name":"operation","type":"uint8"}],"name":"createProxyAndExecTransaction","outputs":[{"internalType":"bool","name":"execTransactionSuccess","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]')},424:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"nonce","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"VERSION","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_owners","type":"address[]"},{"name":"_threshold","type":"uint256"},{"name":"to","type":"address"},{"name":"data","type":"bytes"},{"name":"fallbackHandler","type":"address"},{"name":"paymentToken","type":"address"},{"name":"payment","type":"uint256"},{"name":"paymentReceiver","type":"address"}],"name":"setup","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"},{"name":"data","type":"bytes"},{"name":"operation","type":"uint8"},{"name":"safeTxGas","type":"uint256"},{"name":"baseGas","type":"uint256"},{"name":"gasPrice","type":"uint256"},{"name":"gasToken","type":"address"},{"name":"refundReceiver","type":"address"},{"name":"signatures","type":"bytes"}],"name":"execTransaction","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"prevOwner","type":"address"},{"name":"oldOwner","type":"address"},{"name":"newOwner","type":"address"}],"name":"swapOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"},{"name":"data","type":"bytes"},{"name":"operation","type":"uint8"}],"name":"requiredTxGas","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"},{"internalType":"enum Enum.Operation","name":"operation","type":"uint8"},{"internalType":"uint256","name":"safeTxGas","type":"uint256"},{"internalType":"uint256","name":"baseGas","type":"uint256"},{"internalType":"uint256","name":"gasPrice","type":"uint256"},{"internalType":"address","name":"gasToken","type":"address"},{"internalType":"address","name":"refundReceiver","type":"address"},{"internalType":"uint256","name":"_nonce","type":"uint256"}],"name":"getTransactionHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getModules","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"contract Module","name":"module","type":"address"}],"name":"enableModule","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"contract Module","name":"prevModule","type":"address"},{"internalType":"contract Module","name":"module","type":"address"}],"name":"disableModule","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"contract Module","name":"module","type":"address"}],"name":"isModuleEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"}]')},427:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=n(2),r=n.n(a),s=(n(39),n(195)),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},o=function(e,t,n){return i(void 0,void 0,void 0,r.a.mark((function a(){var s,i,o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.signMessage(n,t);case 2:s=a.sent,i=c(n,s,t),o=parseInt(s.slice(-2),16),a.t0=o,a.next=0===a.t0||1===a.t0?8:27===a.t0||28===a.t0?10:12;break;case 8:return o+=31,a.abrupt("break",13);case 10:return i&&(o+=4),a.abrupt("break",13);case 12:throw new Error("Invalid signature");case 13:return s=s.slice(0,-2)+o.toString(16),a.abrupt("return",s);case 15:case"end":return a.stop()}}),a)})))},c=function(t,n,a){var r;try{var i={r:e.from(n.slice(2,66),"hex"),s:e.from(n.slice(66,130),"hex"),v:parseInt(n.slice(130,132),16)},o=Object(s.ecrecover)(e.from(t.slice(2),"hex"),i.v,i.r,i.s);r=Object(s.bufferToHex)(Object(s.pubToAddress)(o)).toLowerCase()!==a.toLowerCase()}catch(c){r=!0}return r}}).call(this,n(11).Buffer)},500:function(e,t){},503:function(e,t){},509:function(e,t){},511:function(e,t){},522:function(e,t){},524:function(e,t){},536:function(e,t){},712:function(e,t){},714:function(e,t){},721:function(e,t){},722:function(e,t){},803:function(e,t){},961:function(e,t,n){"use strict";n.r(t);var a,r,s,i,o,c,u,d,l,p,f,h,b,v,x=n(17),y=n(0),w=n.n(y),m=n(31),k=n.n(m),j=n(33),g=n(34),O=n(420),T=n(421),C=Object(j.createGlobalStyle)(a||(a=Object(g.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  html, body {\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    padding: 10px;\n  }\n\n  @font-face {\n    font-family: 'Averta';\n    font-display: swap;\n    src: local('Averta'), local('Averta Bold'),\n    url(",") format('woff2'),\n    url(",") format('woff');\n  }\n\n  h4 {\n    color: #008c73;\n    margin: 20px 0 10px 0  !important;\n  }\n"])),T.a,O.a),A=n(2),E=n.n(A),S=n(66),M=n(42),P=n(39),D=n.n(P),B=function(e){if(!e)return"0 ETH";var t=new D.a(10).pow(18);return e.div(t).decimalPlaces(7).toString()+" ETH"},N=function(e){if(e){return{1:"Mainnet",2:"Morden",3:"Ropsten",4:"Rinkeby",5:"Goerli",42:"Kovan",100:"xDai",246:"Energy Web Chain",73799:"Volta (Energy Web Chain)"}[e]}},R=n(6),z=j.default.div(r||(r=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  min-height: 45px;\n"]))),I=j.default.div(s||(s=Object(g.a)(["\n  margin-right: 10px;\n"]))),H=Object(j.default)(x.TextField)(i||(i=Object(g.a)(["\n  width: 600px !important;\n"]))),K=function(e){var t=e.walletState,n=e.saltNonce,a=e.setSaltNonce;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(x.Title,{size:"sm",children:"Information"}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"Network:"})}),Object(R.jsx)(x.Text,{size:"xl",children:(null===t||void 0===t?void 0:t.networkId)&&N(null===t||void 0===t?void 0:t.networkId)})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"Running as a:"})}),Object(R.jsx)(x.Text,{size:"xl",children:(null===t||void 0===t?void 0:t.isSafeApp)?"Safe App":"Standalone App"})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"Connected to:"})}),Object(R.jsx)(x.Text,{size:"xl",children:(null===t||void 0===t?void 0:t.isConnectedToSafe)?"Safe account":"EOA"})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"State of the Proxy:"})}),Object(R.jsx)(x.Text,{size:"xl",children:(null===t||void 0===t?void 0:t.isProxyDeployed)?"Deployed ".concat((null===t||void 0===t?void 0:t.contractVersion)&&"(v".concat(null===t||void 0===t?void 0:t.contractVersion,")")):"Not deployed"})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"Owner address:"})}),(null===t||void 0===t?void 0:t.ownerAddress)&&Object(R.jsx)(x.EthHashInfo,{hash:null===t||void 0===t?void 0:t.ownerAddress,showIdenticon:!0,showCopyBtn:!0,showEtherscanBtn:!0,textSize:"xl",shortenHash:4})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"CPK address:"})}),(null===t||void 0===t?void 0:t.cpkAddress)&&Object(R.jsx)(x.EthHashInfo,{hash:null===t||void 0===t?void 0:t.cpkAddress,showIdenticon:!0,showCopyBtn:!0,showEtherscanBtn:!0,textSize:"xl",shortenHash:4})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"CPK Balance:"})}),Object(R.jsx)(x.Text,{size:"xl",children:B(null===t||void 0===t?void 0:t.cpkBalance)})]}),Object(R.jsxs)(z,{children:[Object(R.jsx)(I,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"CPK salt nonce:"})}),(null===t||void 0===t?void 0:t.saltNonce)&&Object(R.jsx)(x.EthHashInfo,{hash:null===t||void 0===t?void 0:t.saltNonce,showCopyBtn:!0,textSize:"xl",shortenHash:4})]}),Object(R.jsx)(x.Title,{size:"sm",children:"Configuration"}),Object(R.jsx)(z,{children:Object(R.jsx)(H,{id:"saltnonce",label:"Custom CPK salt nonce",value:n,onChange:function(e){return a(e.target.value)}})})]})},L=j.default.div(o||(o=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  height: 40px;\n"]))),G=j.default.div(c||(c=Object(g.a)(["\n  margin-right: 10px;\n"]))),W=j.default.div(u||(u=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 20px;\n"]))),F=Object(j.default)(x.Button)(d||(d=Object(g.a)(["\n  width: 242px;\n"]))),V=Object(j.default)(x.TextField)(l||(l=Object(g.a)(["\n  width: 600px !important;\n"]))),_=Object(j.default)(x.Card)(p||(p=Object(g.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"]))),U=[{id:"1",label:"Enabled modules"}],J=function(e){var t=e.cpk,n=e.walletState,a=Object(y.useState)(""),r=Object(M.a)(a,2),s=r[0],i=r[1],o=Object(y.useState)(),c=Object(M.a)(o,2),u=c[0],d=c[1],l=Object(y.useState)(),p=Object(M.a)(l,2),f=p[0],h=p[1],b=Object(y.useState)(!1),v=Object(M.a)(b,2),w=v[0],m=v[1],k=Object(y.useState)(!1),j=Object(M.a)(k,2),g=j[0],O=j[1],T=Object(y.useState)([]),C=Object(M.a)(T,2),A=C[0],P=C[1],D=Object(y.useCallback)(Object(S.a)(E.a.mark((function e(){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getModules();case 3:n=e.sent,a=n.map((function(e,t){return{id:t.toString(),cells:[{content:e}]}})),P(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]);Object(y.useEffect)((function(){D()}),[D]);var B=function(){var e=Object(S.a)(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return m(!1),d(""),e.prev=4,e.next=7,t.enableModule(s);case 7:n=e.sent,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(e.t0),m(!0),e.abrupt("return");case 15:return e.next=17,I(n);case 17:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(S.a)(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return m(!1),d(""),e.prev=4,e.next=7,t.disableModule(s);case 7:n=e.sent,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(e.t0),m(!0),e.abrupt("return");case 15:return e.next=17,I(n);case 17:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(S.a)(E.a.mark((function e(n){var a,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===n||void 0===n?void 0:n.safeTxHash)){e.next=5;break}return h(n.safeTxHash),e.next=4,null===(r=t.safeAppsSdkConnector)||void 0===r?void 0:r.getBySafeTxHash(n.safeTxHash);case 4:a=e.sent;case 5:return((null===n||void 0===n?void 0:n.hash)||a)&&d(n.hash||(null===(s=a)||void 0===s?void 0:s.transactionHash)),O(!0),e.next=9,new Promise((function(e,t){var a;return null===n||void 0===n||null===(a=n.promiEvent)||void 0===a?void 0:a.then((function(t){return e(t)})).catch(t)}));case 9:return e.next=11,D();case 11:O(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(x.Title,{size:"sm",children:"Safe modules"}),Object(R.jsxs)(L,{children:[Object(R.jsx)(G,{children:Object(R.jsx)(x.Text,{size:"xl",children:"Test module available on Rinkeby:"})}),Object(R.jsx)(x.EthHashInfo,{hash:"0x33A458E072b182152Bb30243f29585a82c45A22b",textSize:"xl",showEtherscanBtn:!0,showCopyBtn:!0,shortenHash:4,network:N(null===n||void 0===n?void 0:n.networkId)})]}),Object(R.jsx)(W,{children:Object(R.jsx)(V,{id:"standard-name",label:"Module Address",value:s,onChange:function(e){return i(e.target.value)}})}),Object(R.jsxs)(W,{children:[Object(R.jsx)(F,{onClick:B,size:"lg",color:"primary",variant:"contained",children:"Enable module"}),Object(R.jsx)(F,{onClick:z,size:"lg",color:"primary",variant:"contained",children:"Disable module"})]}),w&&Object(R.jsx)(L,{children:Object(R.jsx)(x.Text,{size:"xl",color:"error",children:"Transaction rejected"})}),u&&Object(R.jsxs)(L,{children:[Object(R.jsx)(G,{children:Object(R.jsx)(x.Text,{size:"xl",as:"span",strong:!0,children:"Transaction hash:"})}),Object(R.jsx)(x.EthHashInfo,{hash:u,textSize:"xl",shortenHash:8,showEtherscanBtn:!0,showCopyBtn:!0,network:N(null===n||void 0===n?void 0:n.networkId)})]}),f&&Object(R.jsxs)(L,{children:[Object(R.jsx)(G,{children:Object(R.jsx)(x.Text,{size:"xl",as:"span",strong:!0,children:"Safe transaction hash:"})}),Object(R.jsx)(x.EthHashInfo,{hash:f,textSize:"xl",shortenHash:8,showCopyBtn:!0,network:N(null===n||void 0===n?void 0:n.networkId)})]}),g?Object(R.jsx)(W,{children:Object(R.jsx)(_,{children:Object(R.jsx)(x.Loader,{size:"sm"})})}):Object(R.jsx)(W,{children:A.length>0?Object(R.jsx)(x.Table,{headers:U,rows:A}):Object(R.jsx)(_,{children:Object(R.jsx)(x.Text,{size:"xl",children:"No modules enabled"})})})]})},Y=j.default.div(f||(f=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 0;\n"]))),X=Object(j.default)(Y)(h||(h=Object(g.a)(["\n  padding: 0;\n"]))),$=Object(j.default)(x.Button)(b||(b=Object(g.a)(["\n  width: 100%;\n"]))),q=j.default.div(v||(v=Object(g.a)(["\n  margin-right: 10px;\n"]))),Q=function(e){var t=e.cpk,n=e.walletState,a=e.enabledRocksideTxRelay,r=e.setEnabledRocksideTxRelay,s=Object(y.useState)(),i=Object(M.a)(s,2),o=i[0],c=i[1],u=Object(y.useState)(),d=Object(M.a)(u,2),l=d[0],p=d[1],f=Object(y.useState)(!1),h=Object(M.a)(f,2),b=h[0],v=h[1],w=function(){var e=Object(S.a)(E.a.mark((function e(){var a,r,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ownerAddress){e.next=2;break}return e.abrupt("return");case 2:return v(!1),c(""),i=[{to:n.ownerAddress,value:"".concat(11e17)}],e.prev=5,e.next=8,t.execTransactions(i);case 8:s=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),v(!0);case 15:(null===(a=s)||void 0===a?void 0:a.safeTxHash)&&p(s.safeTxHash),(null===(r=s)||void 0===r?void 0:r.hash)&&c(s.hash);case 17:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(S.a)(E.a.mark((function e(){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null===(n=t.safeAppsSdkConnector)||void 0===n?void 0:n.getBySafeTxHash(l);case 4:a=e.sent,c(null===a||void 0===a?void 0:a.transactionHash);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(x.Title,{size:"sm",children:"Information"}),Object(R.jsxs)(Y,{children:[Object(R.jsx)(q,{children:Object(R.jsx)(x.Text,{size:"xl",strong:!0,children:"CPK Balance:"})}),Object(R.jsx)(x.Text,{size:"xl",children:B(null===n||void 0===n?void 0:n.cpkBalance)})]}),Object(R.jsx)(x.Title,{size:"sm",children:"Configuration"}),Object(R.jsx)(X,{children:Object(R.jsx)(x.Checkbox,{name:"checkboxTxRelay",checked:a,onChange:function(e,t){return r(t)},label:"Use Rockside transaction relay"})}),Object(R.jsx)(x.Title,{size:"sm",children:"Transactions"}),Object(R.jsx)(Y,{children:Object(R.jsx)($,{onClick:w,size:"lg",color:"primary",variant:"contained",children:"Send 1.1 ETH to the CPK owner"})}),b&&Object(R.jsx)(Y,{children:Object(R.jsx)(x.Text,{size:"xl",color:"error",children:"Transaction rejected"})}),l&&Object(R.jsxs)(Y,{children:[Object(R.jsx)(q,{children:Object(R.jsx)(x.Text,{size:"xl",as:"span",strong:!0,children:"Safe transaction hash:"})}),Object(R.jsx)(x.EthHashInfo,{hash:l,textSize:"xl",shortenHash:8,showCopyBtn:!0,network:N(null===n||void 0===n?void 0:n.networkId)})]}),n.isSafeApp&&l&&Object(R.jsx)(Y,{children:Object(R.jsx)($,{onClick:m,size:"lg",color:"primary",variant:"contained",children:"Get transaction hash"})}),o&&Object(R.jsxs)(Y,{children:[Object(R.jsx)(q,{children:Object(R.jsx)(x.Text,{size:"xl",as:"span",strong:!0,children:"Transaction hash:"})}),Object(R.jsx)(x.EthHashInfo,{hash:o,textSize:"xl",shortenHash:8,showEtherscanBtn:!0,showCopyBtn:!0,network:N(null===n||void 0===n?void 0:n.networkId)})]})]})},Z=[{version:"1.2.0",address:"0x6851D6fDFAfD08c0295C392436245E5bc78B0185"},{version:"1.1.1",address:"0x34CfAC646f301356fAa8B21e94227e3583Fe3F5F"}],ee={1:{masterCopyAddressVersions:Z,proxyFactoryAddress:"0x0fB4340432e56c014fa96286de17222822a9281b",multiSendAddress:"0x8D29bE29923b68abfDD21e541b9374737B49cdAD",fallbackHandlerAddress:"0xd5D82B6aDDc9027B22dCA772Aa68D5d74cdBdF44"},4:{masterCopyAddressVersions:Z,proxyFactoryAddress:"0x336c19296d3989e9e0c2561ef21c964068657c38",multiSendAddress:"0x8D29bE29923b68abfDD21e541b9374737B49cdAD",fallbackHandlerAddress:"0xd5D82B6aDDc9027B22dCA772Aa68D5d74cdBdF44"},5:{masterCopyAddressVersions:Z,proxyFactoryAddress:"0xfC7577774887aAE7bAcdf0Fc8ce041DA0b3200f7",multiSendAddress:"0x8D29bE29923b68abfDD21e541b9374737B49cdAD",fallbackHandlerAddress:"0xd5D82B6aDDc9027B22dCA772Aa68D5d74cdBdF44"},42:{masterCopyAddressVersions:Z,proxyFactoryAddress:"0xfC7577774887aAE7bAcdf0Fc8ce041DA0b3200f7",multiSendAddress:"0x8D29bE29923b68abfDD21e541b9374737B49cdAD",fallbackHandlerAddress:"0xd5D82B6aDDc9027B22dCA772Aa68D5d74cdBdF44"},100:{masterCopyAddressVersions:Z,proxyFactoryAddress:"0xfC7577774887aAE7bAcdf0Fc8ce041DA0b3200f7",multiSendAddress:"0x8D29bE29923b68abfDD21e541b9374737B49cdAD",fallbackHandlerAddress:"0xd5D82B6aDDc9027B22dCA772Aa68D5d74cdBdF44"}};function te(e,t){if(!t)return e;for(var n={},a=0,r=Object.keys(t);a<r.length;a++){var s=r[a],i=t[s],o=[];if(i.masterCopyAddress?o=[{version:Z[0].version,address:i.masterCopyAddress}]:i.masterCopyAddressVersions&&(o=i.masterCopyAddressVersions),0===o.length)throw new Error('Properties "masterCopyAddress" or "masterCopyAddressVersions" are missing in CPK network configuration');n[s]={masterCopyAddressVersions:o,proxyFactoryAddress:i.proxyFactoryAddress,multiSendAddress:i.multiSendAddress,fallbackHandlerAddress:i.fallbackHandlerAddress}}return Object.assign(Object.assign({},e),n)}var ne=n(7),ae=n(8),re=n(192),se=n(422),ie=n(423),oe=n(194),ce=n(424),ue=n(60),de=n(40),le=n(14),pe=n(15),fe=n(432);function he(e){return"0x".concat(e.map((function(e){var t=e.replace(/^0x/,"");return t.length%2===0?t:"0"+t})).join(""))}function be(e){return"0x".concat(Number(e.toString()).toString(16))}var ve,xe=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};!function(e){e[e.Call=0]="Call",e[e.DelegateCall=1]="DelegateCall"}(ve||(ve={}));var ye=function(e){Object(le.a)(n,e);var t=Object(pe.a)(n);function n(e,a,r){var s;return Object(ne.a)(this,n),(s=t.call(this,e)).revertData=a,s.revertMessage=r,s}return n}(Object(fe.a)(Error));function we(e){return{operation:e.operation?e.operation:Se,to:e.to,value:e.value?e.value.toString():Me.toString(),data:e.data?e.data:Pe}}function me(e){var t=e.gas,n=e.gasLimit,a=xe(e,["gas","gasLimit"]);if(null!=t&&null!=n)throw new Error("specified both gas and gasLimit on options: ".concat(e));return Object.assign(Object.assign({},a),{gas:t||n})}function ke(e){var t=me(e),n=t.from,a=t.to,r=t.value,s=t.data,i=t.gas;return{from:n,to:a,value:r?be(r):void 0,data:s,gas:i?be(i):void 0}}var je,ge,Oe,Te,Ce,Ae,Ee="0x".concat("0".repeat(40)),Se=ve.Call,Me="0x0",Pe="0x",De=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},Be=function(){function e(t){Object(ne.a)(this,e),this.contract=t}return Object(ae.a)(e,[{key:"getContractVersion",value:function(){return De(this,void 0,void 0,E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.contract.call("VERSION",[]));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getModules",value:function(){return De(this,void 0,void 0,E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.contract.call("getModules",[]));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"encodeEnableModule",value:function(e){return De(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contract.encode("enableModule",[e]));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"encodeDisableModule",value:function(e){return De(this,void 0,void 0,E.a.mark((function t(){var n,a,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.call("getModules",[]);case 2:return n=t.sent,a=n.findIndex((function(t){return t.toLowerCase()===e.toLowerCase()})),r=0===a?"0x0000000000000000000000000000000000000001":n[a-1],t.abrupt("return",this.contract.encode("disableModule",[r,e]));case 6:case"end":return t.stop()}}),t,this)})))}}]),e}(),Ne=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},Re=function(e){Object(le.a)(n,e);var t=Object(pe.a)(n);function n(){return Object(ne.a)(this,n),t.apply(this,arguments)}return Object(ae.a)(n,[{key:"isModuleEnabled",value:function(e){var t=this,a=Object.create(null,{contract:{get:function(){return Object(ue.a)(Object(de.a)(n.prototype),"contract",t)}}});return Ne(this,void 0,void 0,E.a.mark((function t(){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.contract.call("getModules",[]);case 2:return n=t.sent,r=n.filter((function(t){return t.toLowerCase()===e.toLowerCase()})),t.abrupt("return",r.length>0);case 5:case"end":return t.stop()}}),t)})))}}]),n}(Be),ze=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},Ie=function(e){Object(le.a)(n,e);var t=Object(pe.a)(n);function n(){return Object(ne.a)(this,n),t.apply(this,arguments)}return Object(ae.a)(n,[{key:"isModuleEnabled",value:function(e){return ze(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contract.call("isModuleEnabled",[e]));case 1:case"end":return t.stop()}}),t,this)})))}}]),n}(Be),He=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},Ke=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Le=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},Ge=function(){function e(t,n){Object(ne.a)(this,e),je.set(this,void 0),ge.set(this,void 0),Oe.set(this,void 0),Te.set(this,void 0),Ce.set(this,void 0),Ae.set(this,void 0),Ke(this,Te,n.masterCopyAddressVersions[0].address),Ke(this,Ae,n.fallbackHandlerAddress),Ke(this,Ce,t.getContract(re,n.multiSendAddress)),Ke(this,Oe,t.getContract(ie,n.proxyFactoryAddress))}return Object(ae.a)(e,[{key:"init",value:function(e){return He(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.calculateVersionUtils(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"calculateVersionUtils",value:function(e){return He(this,void 0,void 0,E.a.mark((function t(){var n,a,r,s,i,o,c,u,d,l,p,f,h,b,v;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.ethLibAdapter,a=e.ownerAccount,r=e.saltNonce,s=e.network,i=e.isSafeApp,o=e.isConnectedToSafe,!i&&!o){t.next=9;break}return d=n.getContract(oe,a),t.next=5,d.call("VERSION",[]);case 5:u=t.sent,c=a,t.next=43;break;case 9:l=n.keccak256(n.abiEncode(["address","uint256"],[a,r])),p=Object(se.a)(s.masterCopyAddressVersions),t.prev=11,p.s();case 13:if((f=p.n()).done){t.next=30;break}return h=f.value,t.next=17,this.calculateProxyAddress(h.address,l,n);case 17:return c=t.sent,t.next=20,n.getCode(c);case 20:if(b=t.sent,!("0x"!==b)){t.next=28;break}return v=n.getContract(oe,c),t.next=26,v.call("VERSION",[]);case 26:return u=t.sent,t.abrupt("break",30);case 28:t.next=13;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(11),p.e(t.t0);case 35:return t.prev=35,p.f(),t.finish(35);case 38:if(u){t.next=43;break}return u=s.masterCopyAddressVersions[0].version,t.next=42,this.calculateProxyAddress(s.masterCopyAddressVersions[0].address,l,n);case 42:c=t.sent;case 43:t.t1=u,t.next="1.2.0"===t.t1?46:"1.1.1"===t.t1?49:52;break;case 46:return Ke(this,ge,n.getContract(ce,c)),Ke(this,je,new Ie(Le(this,ge))),t.abrupt("break",53);case 49:return Ke(this,ge,n.getContract(oe,c)),Ke(this,je,new Re(Le(this,ge))),t.abrupt("break",53);case 52:throw new Error("CPK Proxy version is not valid");case 53:case"end":return t.stop()}}),t,this,[[11,32,35,38]])})))}},{key:"calculateProxyAddress",value:function(e,t,n){return He(this,void 0,void 0,E.a.mark((function a(){var r,s;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=n,a.next=3,Le(this,Oe).call("proxyCreationCode",[]);case 3:return a.t1=a.sent,a.t2={type:"bytes",value:a.t1},a.t3={type:"bytes",value:n.abiEncode(["address"],[e])},r=a.t0.abiEncodePacked.call(a.t0,a.t2,a.t3),s=n.calcCreate2Address(Le(this,Oe).address,t,r),a.abrupt("return",s);case 9:case"end":return a.stop()}}),a,this)})))}},{key:"versionUtils",get:function(){return Le(this,je)}},{key:"contract",get:function(){return Le(this,ge)}},{key:"proxyFactory",get:function(){return Le(this,Oe)}},{key:"masterCopyAddress",get:function(){return Le(this,Te)}},{key:"multiSend",get:function(){return Le(this,Ce)}},{key:"fallbackHandlerAddress",get:function(){return Le(this,Ae)}}],[{key:"create",value:function(t){return He(this,void 0,void 0,E.a.mark((function n(){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new e(t.ethLibAdapter,t.network),n.next=3,a.init(t);case 3:return n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))}}]),e}();je=new WeakMap,ge=new WeakMap,Oe=new WeakMap,Te=new WeakMap,Ce=new WeakMap,Ae=new WeakMap;var We,Fe,Ve,_e=Ge,Ue=n(425),Je=n.n(Ue),Ye=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Xe=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},$e=function(){function e(){var t=this;Object(ne.a)(this,e),We.set(this,void 0),Fe.set(this,void 0),Ve.set(this,!1),Ye(this,We,new Je.a),Xe(this,We).getSafeInfo().then((function(e){Ye(t,Ve,!!e.safeAddress),Ye(t,Fe,e.safeAddress)}))}return Object(ae.a)(e,[{key:"isSafeApp",get:function(){return Xe(this,Ve)}},{key:"safeAddress",get:function(){return Xe(this,Fe)}},{key:"appsSdk",get:function(){return Xe(this,We)}},{key:"getSafeInfo",value:function(){return Xe(this,We).getSafeInfo()}},{key:"getBySafeTxHash",value:function(e){return Xe(this,We).txs.getBySafeTxHash(e)}},{key:"sendTransactions",value:function(e,t){return Xe(this,We).txs.send({txs:e,params:t})}}]),e}();We=new WeakMap,Fe=new WeakMap,Ve=new WeakMap;var qe,Qe=$e;!function(e){e.CpkTxManager="CpkTransactionManager",e.SafeTxRelayManager="SafeTransactionRelayManager",e.RocksideTxRelayManager="RocksideTransactionRelayManager"}(qe||(qe={}));var Ze,et=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},tt=function(){function e(){Object(ne.a)(this,e)}return Object(ae.a)(e,[{key:"config",get:function(){return{name:qe.CpkTxManager,url:void 0}}},{key:"execTransactions",value:function(e){var t=e.ownerAccount,n=e.safeExecTxParams,a=e.transactions,r=e.ethLibAdapter,s=e.contractManager,i=e.saltNonce,o=e.isDeployed,c=e.isConnectedToSafe,u=e.sendOptions;return et(this,void 0,void 0,E.a.mark((function e(){var d,l,p,f,h,b,v,x,y,w,m,k,j;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=s.contract,l=s.proxyFactory,p=s.masterCopyAddress,f=s.fallbackHandlerAddress,d){e.next=3;break}throw new Error("CPK Proxy contract uninitialized");case 3:if(!c){e.next=5;break}return e.abrupt("return",this.execTxsWhileConnectedToSafe(r,a,u));case 5:return h=r.abiEncodePacked({type:"uint256",value:t},{type:"uint256",value:0},{type:"uint8",value:1}),b=o?this.getSafeProxyTxObj(d,n,h):this.getCPKFactoryTxObj(p,f,n,i,l),e.next=9,this.findGasLimit(r,b,u);case 9:if(v=e.sent,x=v.success,y=v.gasLimit,u.gas=y,w=1===a.length,x){e.next=18;break}return e.next=17,this.makeTransactionError(r,n,d.address,y,o,w);case 17:throw e.sent;case 18:return m=b.contract,k=b.methodName,j=b.params,e.abrupt("return",m.send(k,j,u));case 20:case"end":return e.stop()}}),e,this)})))}},{key:"execTxsWhileConnectedToSafe",value:function(e,t,n){return et(this,void 0,void 0,E.a.mark((function a(){var r,s,i,o;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.some((function(e){return e.operation===ve.DelegateCall}))){a.next=2;break}throw new Error("DelegateCall unsupported by Gnosis Safe");case 2:if(1!==t.length){a.next=5;break}return r=t[0],s=r.to,i=r.value,o=r.data,a.abrupt("return",e.ethSendTransaction(Object.assign({to:s,value:i,data:o},n)));case 5:return a.next=7,e.providerSend("gs_multi_send",t.map((function(e){return{to:e.to,value:e.value,data:e.data}})));case 7:return a.t0=a.sent,a.abrupt("return",{hash:a.t0});case 9:case"end":return a.stop()}}),a)})))}},{key:"getSafeProxyTxObj",value:function(e,t,n){return{contract:e,methodName:"execTransaction",params:[t.to,t.value,t.data,t.operation,0,0,0,Ee,Ee,n]}}},{key:"getCPKFactoryTxObj",value:function(e,t,n,a,r){return{contract:r,methodName:"createProxyAndExecTransaction",params:[e,a,t,n.to,n.value,n.data,n.operation]}}},{key:"findGasLimit",value:function(e,t,n){var a=t.contract,r=t.methodName,s=t.params;return et(this,void 0,void 0,E.a.mark((function t(){var i,o,c,u,d,l,p,f,h;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(e){return et(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.call(r,s,e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},o=function(e){return Number(e.toString())},n.gas){t.next=39;break}return t.t0=o,t.next=6,e.getBlock("latest");case 6:return t.t1=t.sent.gasLimit,c=(0,t.t0)(t.t1),u=Object.assign(Object.assign({},n),{gas:c}),t.next=11,i(u);case 11:if(t.sent){t.next=13;break}return t.abrupt("return",{success:!1,gasLimit:c});case 13:return d=1e4,t.next=16,a.estimateGas(r,s,n);case 16:return l=t.sent,p=c,u.gas=l,t.next=21,i(u);case 21:if(t.sent){t.next=36;break}case 22:if(!(l+d<=p)){t.next=34;break}return f=Math.floor(.5*(l+p)),u.gas=f,t.next=27,i(u);case 27:if(!t.sent){t.next=31;break}p=f-1,t.next=32;break;case 31:l=f+1;case 32:t.next=22;break;case 34:t.next=37;break;case 36:p=l-1;case 37:return h=Math.min(Math.ceil(1.02*(p+1)),c),t.abrupt("return",{success:!0,gasLimit:h});case 39:return t.next=41,i(n);case 41:return t.t2=t.sent,t.t3=o(n.gas),t.abrupt("return",{success:t.t2,gasLimit:t.t3});case 44:case"end":return t.stop()}}),t)})))}},{key:"makeTransactionError",value:function(e,t,n,a,r,s){var i=t.to,o=t.value,c=t.data,u=t.operation;return et(this,void 0,void 0,E.a.mark((function t(){var d,l,p;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d="".concat(r?"":"proxy creation and ").concat(s?"transaction":"batch transaction"," execution expected to fail"),!s||u!==ve.Call){t.next=12;break}return t.prev=2,t.next=5,e.getCallRevertData({from:n,to:i,value:o,data:c,gasLimit:a},"latest");case 5:l=t.sent,p=e.decodeError(l),d="".concat(d,": ").concat(p),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.abrupt("return",new ye(d,l,p));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))}}]),e}(),nt=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};function at(e){var t,n,a,r,s,i;return nt(this,void 0,void 0,E.a.mark((function o(){var c,u;return E.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(null!=e){o.next=2;break}return o.abrupt("return",!1);case 2:return o.next=4,null===(t=e.getWalletConnector)||void 0===t?void 0:t.call(e);case 4:if(o.t2=o.sent,o.t2){o.next=9;break}return o.next=8,null===(a=null===(n=e.connection)||void 0===n?void 0:n.getWalletConnector)||void 0===a?void 0:a.call(n);case 8:o.t2=o.sent;case 9:if(o.t1=o.t2,o.t1){o.next=12;break}o.t1=e.wc;case 12:if(o.t0=o.t1,o.t0){o.next=15;break}o.t0=null===(r=e.connection)||void 0===r?void 0:r.wc;case 15:if(c=o.t0,"Safe Multisig WalletConnect"!==(u=null===(s=null===c||void 0===c?void 0:c.peerMeta)||void 0===s?void 0:s.name)&&!(null===(i=null===u||void 0===u?void 0:u.startsWith)||void 0===i?void 0:i.call(u,"Gnosis Safe"))){o.next=19;break}return o.abrupt("return",!0);case 19:if(!e._providers){o.next=23;break}return o.next=22,Promise.all(e._providers.map(at));case 22:return o.abrupt("return",o.sent.includes(!0));case 23:return o.abrupt("return",!1);case 24:case"end":return o.stop()}}),o)})))}!function(e){e.MAINNET="MAINNET",e.MORDEN="MORDEN",e.ROPSTEN="ROPSTEN",e.RINKEBY="RINKEBY",e.GOERLI="GOERLI",e.KOVAN="KOVAN",e.XDAI="XDAI",e.ENERGY_WEB_CHAIN="ENERGY_WEB_CHAIN",e.VOLTA="VOLTA"}(Ze||(Ze={}));var rt,st,it,ot,ct,ut,dt,lt,pt=function(e){if(e){return{MAINNET:1,MORDEN:2,ROPSTEN:3,RINKEBY:4,GOERLI:5,KOVAN:42,XDAI:100,ENERGY_WEB_CHAIN:246,VOLTA:73799}[e.toUpperCase()]}},ft=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},ht=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},bt=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},vt=function(){function e(t){if(Object(ne.a)(this,e),rt.set(this,void 0),st.set(this,void 0),it.set(this,void 0),ot.set(this,void 0),ct.set(this,void 0),ut.set(this,void 0),dt.set(this,"0xcfe33a586323e7325be6aa6ecd8b4600d232a9037e83c8ece69413b777dabe65"),lt.set(this,!1),ht(this,ct,Object.assign({},ee)),t){var n=t.ethLibAdapter,a=t.transactionManager,r=t.ownerAccount,s=t.networks,i=t.saltNonce,o=t.isSafeApp;if((void 0===o||o)&&ht(this,rt,new Qe),!n)throw new Error("ethLibAdapter property missing from options");ht(this,st,n),ht(this,it,null!==a&&void 0!==a?a:new tt),ht(this,ut,r),ht(this,ct,te(ee,s)),i&&ht(this,dt,i)}}return Object(ae.a)(e,[{key:"init",value:function(){var e,t;return ft(this,void 0,void 0,E.a.mark((function n(){var a,r,s;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(bt(this,st)){n.next=2;break}throw new Error("CPK uninitialized ethLibAdapter");case 2:return n.next=4,bt(this,st).getNetworkId();case 4:if(a=n.sent,r=bt(this,ct)[a]){n.next=8;break}throw new Error("Unrecognized network ID ".concat(a));case 8:return n.next=10,this.getOwnerAccount();case 10:return s=n.sent,n.t0=ht,n.t1=this,n.t2=lt,n.next=16,at(bt(this,st).getProvider());case 16:if(n.t3=n.sent,n.t3){n.next=19;break}n.t3=!0===(null===(e=bt(this,rt))||void 0===e?void 0:e.isSafeApp);case 19:return n.t4=n.t3,(0,n.t0)(n.t1,n.t2,n.t4),n.t5=ht,n.t6=this,n.t7=ot,n.next=26,_e.create({ethLibAdapter:bt(this,st),network:r,ownerAccount:s,saltNonce:bt(this,dt),isSafeApp:!0===(null===(t=bt(this,rt))||void 0===t?void 0:t.isSafeApp),isConnectedToSafe:bt(this,lt)});case 26:n.t8=n.sent,(0,n.t5)(n.t6,n.t7,n.t8);case 28:case"end":return n.stop()}}),n,this)})))}},{key:"isProxyDeployed",value:function(){return ft(this,void 0,void 0,E.a.mark((function e(){var t,n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.address;case 2:if(t=e.sent){e.next=5;break}throw new Error("CPK address uninitialized");case 5:if(this.ethLibAdapter){e.next=7;break}throw new Error("CPK ethLibAdapter uninitialized");case 7:return e.next=9,this.ethLibAdapter.getCode(t);case 9:return n=e.sent,a="0x"!==n,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})))}},{key:"getOwnerAccount",value:function(){var e,t;return ft(this,void 0,void 0,E.a.mark((function n(){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(e=bt(this,rt))||void 0===e?void 0:e.isSafeApp)){n.next=4;break}return n.next=3,bt(this,rt).getSafeInfo();case 3:return n.abrupt("return",n.sent.safeAddress);case 4:if(!bt(this,ut)){n.next=6;break}return n.abrupt("return",bt(this,ut));case 6:if(bt(this,st)){n.next=8;break}throw new Error("CPK uninitialized ethLibAdapter");case 8:return n.abrupt("return",null===(t=bt(this,st))||void 0===t?void 0:t.getAccount());case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getBalance",value:function(){var e;return ft(this,void 0,void 0,E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.address;case 2:if(n=t.sent){t.next=5;break}throw new Error("CPK address uninitialized");case 5:if(bt(this,st)){t.next=7;break}throw new Error("CPK ethLibAdapter uninitialized");case 7:return t.abrupt("return",null===(e=bt(this,st))||void 0===e?void 0:e.getBalance(n));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"getNetworkId",value:function(){var e;return ft(this,void 0,void 0,E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===(e=bt(this,rt))||void 0===e?void 0:e.isSafeApp)){t.next=5;break}return t.next=3,bt(this,rt).getSafeInfo();case 3:return n=t.sent.network,t.abrupt("return",pt(n));case 5:if(bt(this,st)){t.next=7;break}throw new Error("CPK ethLibAdapter uninitialized");case 7:return t.abrupt("return",bt(this,st).getNetworkId());case 8:case"end":return t.stop()}}),t,this)})))}},{key:"safeAppsSdkConnector",get:function(){return bt(this,rt)}},{key:"contractManager",get:function(){return bt(this,ot)}},{key:"ethLibAdapter",get:function(){return bt(this,st)}},{key:"networks",get:function(){return bt(this,ct)}},{key:"isConnectedToSafe",get:function(){return bt(this,lt)}},{key:"saltNonce",get:function(){return bt(this,dt)}},{key:"address",get:function(){var e,t,n,a;return(null===(e=bt(this,rt))||void 0===e?void 0:e.safeAddress)?null===(t=bt(this,rt))||void 0===t?void 0:t.safeAddress:null===(a=null===(n=bt(this,ot))||void 0===n?void 0:n.contract)||void 0===a?void 0:a.address}},{key:"setEthLibAdapter",value:function(e){ht(this,st,e)}},{key:"setTransactionManager",value:function(e){var t;if(null===(t=bt(this,rt))||void 0===t?void 0:t.isSafeApp)throw new Error("TransactionManagers are not allowed when the app is running as a Safe App");ht(this,it,e)}},{key:"setNetworks",value:function(e){ht(this,ct,te(ee,e))}},{key:"encodeMultiSendCallData",value:function(e){var t;if(!bt(this,st))throw new Error("CPK ethLibAdapter uninitialized");var n=(null===(t=bt(this,ot))||void 0===t?void 0:t.multiSend)||bt(this,st).getContract(re),a=e.map(we),r=bt(this,st);return n.encode("multiSend",[he(a.map((function(e){return r.abiEncodePacked({type:"uint8",value:e.operation},{type:"address",value:e.to},{type:"uint256",value:e.value},{type:"uint256",value:(t=e.data,Math.ceil((t.startsWith("0x")?t.length-2:t.length)/2))},{type:"bytes",value:e.data});var t})))])}},{key:"execTransactions",value:function(e,t){var n;return ft(this,void 0,void 0,E.a.mark((function a(){var r,s,i,o,c,u,d,l;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.map(we),!((null===(n=bt(this,rt))||void 0===n?void 0:n.isSafeApp)&&e.length>=1)){a.next=3;break}return a.abrupt("return",bt(this,rt).sendTransactions(r,{safeTxGas:null===t||void 0===t?void 0:t.safeTxGas}));case 3:return a.next=5,this.address;case 5:if(s=a.sent){a.next=8;break}throw new Error("CPK address uninitialized");case 8:if(bt(this,ot)){a.next=10;break}throw new Error("CPK contractManager uninitialized");case 10:if(bt(this,st)){a.next=12;break}throw new Error("CPK ethLibAdapter uninitialized");case 12:if(bt(this,it)){a.next=14;break}throw new Error("CPK transactionManager uninitialized");case 14:return a.next=16,this.getOwnerAccount();case 16:if(i=a.sent){a.next=19;break}throw new Error("CPK ownerAccount uninitialized");case 19:return o=this.getSafeExecTxParams(e),c=me(Object.assign(Object.assign({},t),{from:i})),a.next=23,bt(this,st).getCode(s);case 23:return u=a.sent,l=(d="0x"!==u)?bt(this,it):new tt,a.abrupt("return",l.execTransactions({ownerAccount:i,safeExecTxParams:o,transactions:r,ethLibAdapter:bt(this,st),contractManager:bt(this,ot),saltNonce:bt(this,dt),isDeployed:d,isConnectedToSafe:bt(this,lt),sendOptions:c}));case 27:case"end":return a.stop()}}),a,this)})))}},{key:"getContractVersion",value:function(){var e;return ft(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isProxyDeployed();case 2:if(t.sent){t.next=5;break}throw new Error("CPK Proxy contract is not deployed");case 5:if(null===(e=bt(this,ot))||void 0===e?void 0:e.versionUtils){t.next=7;break}throw new Error("CPK contractManager uninitialized");case 7:return t.next=9,bt(this,ot).versionUtils.getContractVersion();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getModules",value:function(){var e;return ft(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isProxyDeployed();case 2:if(t.sent){t.next=5;break}throw new Error("CPK Proxy contract is not deployed");case 5:if(null===(e=bt(this,ot))||void 0===e?void 0:e.versionUtils){t.next=7;break}throw new Error("CPK contractManager uninitialized");case 7:return t.next=9,bt(this,ot).versionUtils.getModules();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"isModuleEnabled",value:function(e){var t;return ft(this,void 0,void 0,E.a.mark((function n(){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.isProxyDeployed();case 2:if(n.sent){n.next=5;break}throw new Error("CPK Proxy contract is not deployed");case 5:if(null===(t=bt(this,ot))||void 0===t?void 0:t.versionUtils){n.next=7;break}throw new Error("CPK contractManager uninitialized");case 7:return n.next=9,bt(this,ot).versionUtils.isModuleEnabled(e);case 9:return n.abrupt("return",n.sent);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"enableModule",value:function(t){var n;return ft(this,void 0,void 0,E.a.mark((function a(){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null===(n=bt(this,ot))||void 0===n?void 0:n.versionUtils){a.next=2;break}throw new Error("CPK contractManager uninitialized");case 2:return a.next=4,this.address;case 4:if(r=a.sent){a.next=7;break}throw new Error("CPK address uninitialized");case 7:return a.t0=this,a.t1=r,a.next=11,bt(this,ot).versionUtils.encodeEnableModule(t);case 11:return a.t2=a.sent,a.t3=e.Call,a.t4={to:a.t1,data:a.t2,operation:a.t3},a.t5=[a.t4],a.next=17,a.t0.execTransactions.call(a.t0,a.t5);case 17:return a.abrupt("return",a.sent);case 18:case"end":return a.stop()}}),a,this)})))}},{key:"disableModule",value:function(t){var n;return ft(this,void 0,void 0,E.a.mark((function a(){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.isProxyDeployed();case 2:if(a.sent){a.next=5;break}throw new Error("CPK Proxy contract is not deployed");case 5:if(null===(n=bt(this,ot))||void 0===n?void 0:n.versionUtils){a.next=7;break}throw new Error("CPK contractManager uninitialized");case 7:return a.next=9,this.address;case 9:if(r=a.sent){a.next=12;break}throw new Error("CPK address uninitialized");case 12:return a.t0=this,a.t1=r,a.next=16,bt(this,ot).versionUtils.encodeDisableModule(t);case 16:return a.t2=a.sent,a.t3=e.Call,a.t4={to:a.t1,data:a.t2,operation:a.t3},a.t5=[a.t4],a.next=22,a.t0.execTransactions.call(a.t0,a.t5);case 22:return a.abrupt("return",a.sent);case 23:case"end":return a.stop()}}),a,this)})))}},{key:"getSafeExecTxParams",value:function(t){var n,a;if(1===t.length)return we(t[0]);if(!(null===(n=bt(this,ot))||void 0===n?void 0:n.multiSend))throw new Error("CPK MultiSend uninitialized");return{to:null===(a=bt(this,ot))||void 0===a?void 0:a.multiSend.address,value:"0",data:this.encodeMultiSendCallData(t),operation:e.DelegateCall}}}],[{key:"create",value:function(t){return ft(this,void 0,void 0,E.a.mark((function n(){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=new e(t),!t){n.next=4;break}return n.next=4,a.init();case 4:return n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})))}}]),e}();rt=new WeakMap,st=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,vt.Call=ve.Call,vt.DelegateCall=ve.DelegateCall;var xt=vt,yt=function(){function e(){Object(ne.a)(this,e)}return Object(ae.a)(e,[{key:"abiEncodePacked",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return he(n.map((function(t){var n=t.type,a=t.value,r=e.abiEncode([n],[a]);if("bytes"===n||"string"===n){var s=parseInt(r.slice(66,130),16);return r.slice(130,130+2*s)}var i=n.match(/^(?:u?int\d*|bytes\d+|address)\[\]$/);if(i)return r.slice(130);if(n.startsWith("bytes")){var o=parseInt(n.slice(5));return r.slice(2,2+2*o)}if(i=n.match(/^u?int(\d*)$/)){if(""!==i[1]){var c=parseInt(i[1])/8;return r.slice(-2*c)}return r.slice(-64)}if("address"===n)return r.slice(-40);throw new Error("unsupported type ".concat(n))})))}},{key:"decodeError",value:function(e){if(!e.startsWith("0x08c379a0"))throw new Error("Unrecognized error format");return this.abiDecode(["string"],"0x".concat(e.slice(10)))[0]}}]),e}(),wt=n(47),mt=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},kt=function(){function e(t){Object(ne.a)(this,e),this.contract=t}return Object(ae.a)(e,[{key:"address",get:function(){return this.contract.options.address}},{key:"call",value:function(e,t,n){var a;return(a=this.contract.methods)[e].apply(a,Object(wt.a)(t)).call(n&&me(n))}},{key:"send",value:function(e,t,n){var a;return gt((a=this.contract.methods)[e].apply(a,Object(wt.a)(t)).send(n&&me(n)),n)}},{key:"estimateGas",value:function(e,t,n){return mt(this,void 0,void 0,E.a.mark((function a(){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=Number,a.next=3,(r=this.contract.methods)[e].apply(r,Object(wt.a)(t)).estimateGas(n&&me(n));case 3:return a.t1=a.sent,a.abrupt("return",(0,a.t0)(a.t1));case 5:case"end":return a.stop()}}),a,this)})))}},{key:"encode",value:function(e,t){var n;return(n=this.contract.methods)[e].apply(n,Object(wt.a)(t)).encodeABI()}}]),e}(),jt=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};function gt(e,t){return new Promise((function(n,a){return e.once("transactionHash",(function(a){return n({sendOptions:t,promiEvent:e,hash:a})})).catch(a)}))}var Ot,Tt=function(e){Object(le.a)(n,e);var t=Object(pe.a)(n);function n(e){var a,r=e.web3;if(Object(ne.a)(this,n),a=t.call(this),!r)throw new Error("web3 property missing from options");return a.web3=r,a}return Object(ae.a)(n,[{key:"getProvider",value:function(){return this.web3.currentProvider}},{key:"providerSend",value:function(e,t){var n=this;return this.web3.version.split(".")[0]>1?this.web3.currentProvider.send(e,t):new Promise((function(a,r){return n.web3.currentProvider.send({jsonrpc:"2.0",id:(new Date).getTime(),method:e,params:t},(function(e,t){return e?r(e):t.error?r(t.error):a(t.result)}))}))}},{key:"signMessage",value:function(e,t){return this.web3.eth.sign(e,t)}},{key:"getNetworkId",value:function(){return jt(this,void 0,void 0,E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.web3.eth.net.getId());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getAccount",value:function(){return jt(this,void 0,void 0,E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.web3.eth.defaultAccount,e.t0){e.next=5;break}return e.next=4,this.web3.eth.getAccounts();case 4:e.t0=e.sent[0];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getBalance",value:function(e){return jt(this,void 0,void 0,E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=D.a,t.next=3,this.web3.eth.getBalance(e);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"keccak256",value:function(e){return this.web3.utils.keccak256(e)}},{key:"abiEncode",value:function(e,t){return this.web3.eth.abi.encodeParameters(e,t)}},{key:"abiDecode",value:function(e,t){return this.web3.eth.abi.decodeParameters(e,t)}},{key:"calcCreate2Address",value:function(e,t,n){return this.web3.utils.toChecksumAddress(this.web3.utils.soliditySha3("0xff",{t:"address",v:e},{t:"bytes32",v:t},this.keccak256(n)).slice(-40))}},{key:"getCode",value:function(e){return this.web3.eth.getCode(e)}},{key:"getBlock",value:function(e){return this.web3.eth.getBlock(e)}},{key:"getContract",value:function(e,t){var n=new this.web3.eth.Contract(e,t);return new kt(n)}},{key:"getCallRevertData",value:function(e,t){return jt(this,void 0,void 0,E.a.mark((function n(){var a,r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.providerSend("eth_call",[ke(e),t]);case 3:return n.abrupt("return",n.sent);case 6:if(n.prev=6,n.t0=n.catch(0),!(a=n.t0.data)&&n.t0.message.startsWith("Node error: ")&&(a=JSON.parse(n.t0.message.slice(12)).data),"string"!==typeof a){n.next=15;break}if(!a.startsWith("Reverted 0x")){n.next=13;break}return n.abrupt("return",a.slice(9));case 13:if(!a.startsWith("0x")){n.next=15;break}return n.abrupt("return",a);case 15:return r=Object.getOwnPropertyNames(a).filter((function(e){return e.startsWith("0x")}))[0],n.abrupt("return",a[r].return);case 17:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"ethSendTransaction",value:function(e){return gt(this.web3.eth.sendTransaction(me(e)),e)}},{key:"toSafeRelayTxResult",value:function(e,t){return t.transactionHash=t.txHash,delete t.txHash,new Promise((function(n,a){return n({promiEvent:new Promise((function(e,n){return e(t)})),hash:e})}))}},{key:"toRocksideRelayTxResult",value:function(e){return e.transactionHash=e.transaction_hash,delete e.transaction_hash,new Promise((function(t,n){return t({promiEvent:new Promise((function(t,n){return t(e)})),hash:e.transactionHash})}))}}]),n}(yt),Ct="https://api.rockside.io",At=n(426),Et=n.n(At),St=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};!function(e){e.GET="GET",e.POST="POST"}(Ot||(Ot={}));var Mt,Pt,Dt=function(e){var t=e.url,n=e.method,a=e.body,r=e.expectedHttpCodeResponse;return St(void 0,void 0,void 0,E.a.mark((function e(){var s,i,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={Accept:"application/json","Content-Type":"application/json"},e.next=3,Et()(t,{method:n,headers:s,body:a});case 3:return i=e.sent,e.next=6,i.json();case 6:if(o=e.sent,i.status===r){e.next=9;break}throw new Error(o.exception);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))},Bt=n(427),Nt=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))},Rt=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},zt=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};!function(e){e.Fast="fast",e.Fastest="fastest",e.Safelow="safelow",e.Standard="standard"}(Pt||(Pt={}));var It=function(){function e(t){var n=t.speed;Object(ne.a)(this,e),Mt.set(this,void 0),Rt(this,Mt,n)}return Object(ae.a)(e,[{key:"config",get:function(){return{name:qe.RocksideTxRelayManager,speed:zt(this,Mt)}}},{key:"execTransactions",value:function(e){var t=e.ownerAccount,n=e.safeExecTxParams,a=e.contractManager,r=e.ethLibAdapter;return Nt(this,void 0,void 0,E.a.mark((function e(){var s,i,o,c,u,d,l,p,f,h;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.contract){e.next=3;break}throw new Error("CPK Proxy contract uninitialized");case 3:return e.next=5,r.getNetworkId();case 5:o=e.sent,e.t0=o,e.next=1===e.t0?9:3===e.t0?11:13;break;case 9:return i="mainnet",e.abrupt("break",14);case 11:return i="ropsten",e.abrupt("break",14);case 13:throw new Error("Network not supported when using Rockside transaction relay");case 14:return e.next=16,s.call("nonce",[]);case 16:return c=e.sent,e.next=19,this.getTxRelayParams(s.address,i);case 19:return u=e.sent,d={to:n.to,value:n.value,data:n.data,operation:n.operation,safeTxGas:0,baseGas:0,gasPrice:Number(u.gas_price),gasToken:Ee,refundReceiver:u.relayer,nonce:c},e.next=23,s.call("getTransactionHash",[d.to,new D.a(n.value).toString(10),d.data,d.operation,d.safeTxGas,d.baseGas,d.gasPrice,d.gasToken,d.refundReceiver,d.nonce]);case 23:return l=e.sent,e.next=26,Object(Bt.a)(r,t,l);case 26:return p=e.sent,f=s.encode("execTransaction",[d.to,new D.a(n.value).toString(10),d.data,d.operation,d.safeTxGas,d.baseGas,d.gasPrice,d.gasToken,d.refundReceiver,p]),e.next=30,this.sendTxToRelay(s.address,f,i);case 30:return h=e.sent,e.abrupt("return",this.followTransaction(i,h,r));case 32:case"end":return e.stop()}}),e,this)})))}},{key:"getTxRelayParams",value:function(e,t){return Nt(this,void 0,void 0,E.a.mark((function n(){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Dt({url:"".concat(Ct,"/ethereum/").concat(t,"/relay/").concat(e,"/params"),method:Ot.GET,expectedHttpCodeResponse:200});case 2:return a=n.sent,n.abrupt("return",a.speeds[zt(this,Mt)]);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"sendTxToRelay",value:function(e,t,n){return Nt(this,void 0,void 0,E.a.mark((function a(){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Dt({url:"".concat(Ct,"/ethereum/").concat(n,"/relay/").concat(e),method:Ot.POST,body:JSON.stringify({data:t,speed:zt(this,Mt)}),expectedHttpCodeResponse:200});case 2:return r=a.sent,a.abrupt("return",r.tracking_id);case 4:case"end":return a.stop()}}),a,this)})))}},{key:"followTransaction",value:function(e,t,n){return Nt(this,void 0,void 0,E.a.mark((function a(){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Dt({url:"".concat(Ct,"/ethereum/").concat(e,"/transactions/").concat(t),method:Ot.GET,expectedHttpCodeResponse:200});case 2:return r=a.sent,a.abrupt("return",n.toRocksideRelayTxResult(r));case 4:case"end":return a.stop()}}),a)})))}}]),e}();Mt=new WeakMap;var Ht=It;D.a.set({EXPONENTIAL_AT:[-7,255]});var Kt,Lt,Gt,Wt,Ft=xt,Vt=n(428),_t=n.n(Vt),Ut=n(429),Jt=n.n(Ut),Yt=n(431),Xt=n.n(Yt),$t=j.default.div(Kt||(Kt=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  width: 180px;\n  & > div {\n    padding: 0;\n  }\n  .web3connect-connect-button {\n    outline: none;\n    background: #008c73;\n    border-radius: 4px;\n    color: #fff;\n    cursor: pointer;\n    transform: none;\n    font-weight: normal;\n    font-size: 14px;\n    box-shadow: none;\n  }\n  .web3connect-connect-button:hover {\n    background: #005546;\n    box-shadow: none;\n    transform: none;\n  }\n"]))),qt=n(795).default,Qt=function(e){var t=e.onConnect;return Object(R.jsx)($t,{children:Object(R.jsx)(Xt.a.Button,{providerOptions:{walletconnect:{package:qt,options:{infuraId:"b42c928da8fd4c1f90374b18aa9ac6ba"}}},onConnect:t,onClose:function(){}})})},Zt=j.default.div(Lt||(Lt=Object(g.a)(["\n  width: 550px;\n  padding: 20px;\n  margin: 0 auto;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n"]))),en=j.default.div(Gt||(Gt=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  h4 {\n    margin: 0 !important;\n  }\n"]))),tn=j.default.div(Wt||(Wt=Object(g.a)(["\n  margin-top: 30px;\n"]))),nn={isSafeApp:void 0,isConnectedToSafe:void 0,isProxyDeployed:void 0,saltNonce:void 0,contractVersion:void 0,cpkAddress:void 0,cpkBalance:void 0,networkId:void 0,ownerAddress:void 0,txManager:void 0},an=[{id:"1",label:"CPK Info",icon:"info"},{id:"2",label:"CPK Transactions",icon:"transactionsInactive"},{id:"3",label:"CPK Modules",icon:"apps"}],rn=function(){var e=Object(y.useState)("1"),t=Object(M.a)(e,2),n=t[0],a=t[1],r=Object(y.useState)(!1),s=Object(M.a)(r,2),i=s[0],o=s[1],c=w.a.useState(void 0),u=Object(M.a)(c,2),d=u[0],l=u[1],p=w.a.useState("Contract Proxy Kit"),f=Object(M.a)(p,2),h=f[0],b=f[1],v=Object(y.useState)(void 0),m=Object(M.a)(v,2),k=m[0],j=m[1],g=Object(y.useState)(nn),O=Object(M.a)(g,2),T=O[0],C=O[1];return Object(y.useEffect)((function(){(function(){var e=Object(S.a)(E.a.mark((function e(){var t,n,a,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return t=h,h&&(t="0x"+_t()(h).toString("hex")),n=new Tt({web3:d}),a={3:{masterCopyAddress:"0x798960252148C0215F593c14b7c5B07183826212",proxyFactoryAddress:"0x8240eE136011392736920419cB7CB8bBadAc27E4",multiSendAddress:"0xe637DE43c1702fd59A2E7ab8F4224C7CBb0e9D3D",fallbackHandlerAddress:"0x83B1CB4017acf298b9Ff47FC4e380282738406B2"}},i&&(r=new Ht({speed:Pt.Fastest})),e.prev=7,e.next=10,Ft.create({ethLibAdapter:n,networks:a,saltNonce:t,transactionManager:r});case 10:s=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(7),alert("Try with a different network"),console.error(e.t0),e.abrupt("return");case 18:j(s);case 19:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(){return e.apply(this,arguments)}})()()}),[d,h,i]),Object(y.useEffect)((function(){(function(){var e=Object(S.a)(E.a.mark((function e(){var t,n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k.isProxyDeployed();case 4:if(!(n=e.sent)){e.next=11;break}return e.next=8,k.getContractVersion();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=void 0;case 12:return a=e.t0,e.t1=C,e.t2=null===(t=k.safeAppsSdkConnector)||void 0===t?void 0:t.isSafeApp,e.t3=k.isConnectedToSafe,e.t4=n,e.next=19,k.saltNonce;case 19:return e.t5=e.sent,e.t6=a,e.next=23,k.address;case 23:return e.t7=e.sent,e.next=26,k.getBalance();case 26:return e.t8=e.sent,e.next=29,k.getNetworkId();case 29:return e.t9=e.sent,e.next=32,k.getOwnerAccount();case 32:e.t10=e.sent,e.t11={isSafeApp:e.t2,isConnectedToSafe:e.t3,isProxyDeployed:e.t4,saltNonce:e.t5,contractVersion:e.t6,cpkAddress:e.t7,cpkBalance:e.t8,networkId:e.t9,ownerAddress:e.t10},(0,e.t1)(e.t11);case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[k]),Object(R.jsxs)(Zt,{children:[Object(R.jsxs)(en,{children:[Object(R.jsx)(x.Title,{size:"sm",children:"CPK Configuration App"}),Object(R.jsx)(Qt,{onConnect:function(e){e&&l(new Jt.a(e))}})]}),k&&Object(R.jsxs)(tn,{children:[Object(R.jsx)(x.Tab,{onChange:a,selectedTab:n,variant:"outlined",items:an}),"1"===n&&Object(R.jsx)(K,{walletState:T,saltNonce:h,setSaltNonce:b}),"2"===n&&Object(R.jsx)(Q,{cpk:k,walletState:T,enabledRocksideTxRelay:i,setEnabledRocksideTxRelay:o}),"3"===n&&Object(R.jsx)(J,{cpk:k,walletState:T})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.a.render(Object(R.jsx)(w.a.StrictMode,{children:Object(R.jsxs)(j.ThemeProvider,{theme:x.theme,children:[Object(R.jsx)(C,{}),Object(R.jsx)(rn,{})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[961,1,2]]]);
//# sourceMappingURL=main.e11d7684.chunk.js.map